@model Grouply.ViewModels.Home.HomeFeedViewModel
@{
    ViewData["Title"] = "Home Feed";
}

<div class="max-w-2xl mx-auto mt-6">

    <!-- Tabs -->
    <ul class="nav nav-tabs mb-4" id="feedTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="following-tab" data-bs-toggle="tab" data-bs-target="#following"
                type="button" role="tab" aria-controls="following" aria-selected="true">Following</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="foryou-tab" data-bs-toggle="tab" data-bs-target="#foryou" type="button"
                role="tab" aria-controls="foryou" aria-selected="false">For You</button>
        </li>
    </ul>

    <!-- Tab panes -->
    <div class="tab-content">

        <!-- Following Tab -->
        <div class="tab-pane fade show active" id="following" role="tabpanel" aria-labelledby="following-tab">
            @if (!Model.FollowingPosts.Any())
            {
                <p class="text-center text-gray-500">You haven't joined any groups yet or no posts available.</p>
            }
            else
            {
                @foreach (var post in Model.FollowingPosts)
                {
                    <div class="card shadow-sm mb-4">
                        <div class="card-header d-flex align-items-center">
                            <a href="/Groups/Details/@post.Group?.Id">
                                <img src="@(!string.IsNullOrEmpty(post.Group?.ImageUrl) ? post.Group.ImageUrl : "/images/default-group.png")"
                                    class="rounded-circle me-3" style="width:50px; height:50px; object-fit:cover;" />
                            </a>
                            <div>
                                <a href="/Groups/Details/@post.Group?.Id" class="fw-bold text-decoration-none text-dark">
                                    @post.Group?.Name
                                </a>
                            </div>
                        </div>
                        <div class="card-body">
                            @Html.Partial("~/Views/Shared/PostCard.cshtml", post)
                        </div>
                    </div>
                }
            }
        </div>

        <!-- For You Tab -->
        <div class="tab-pane fade" id="foryou" role="tabpanel" aria-labelledby="foryou-tab">
            @foreach (var post in Model.ForYouPosts)
            {
                <div class="card shadow-sm mb-4">
                    <div class="card-header d-flex align-items-center">
                        <a href="/Groups/Details/@post.Group?.Id">
                            <img src="@(!string.IsNullOrEmpty(post.Group?.ImageUrl) ? post.Group.ImageUrl : "/images/default-group.png")"
                                class="rounded-circle me-3" style="width:50px; height:50px; object-fit:cover;" />
                        </a>
                        <div>
                            <a href="/Groups/Details/@post.Group?.Id" class="fw-bold text-decoration-none text-dark">
                                @post.Group?.Name
                            </a>
                        </div>
                    </div>
                    <div class="card-body">
                        @Html.Partial("~/Views/Shared/PostCard.cshtml", post)
                    </div>
                </div>
            }
        </div>

    </div>
</div>